title: ç±»å‹ã€åˆ†ç±»å®šä¹‰æ—¶ä½¿ç”¨ type è¿˜æ˜¯ kind ï¼Ÿ
date: 2025-07-02 08:17:57
category: programming
tags:

- rust
- typescript
- kind
- type

---

åœ¨ç¼–ç¨‹è®¾è®¡ä¸­å¯¹ **åˆ†ç±»**ã€**ç±»å‹**ã€**çŠ¶æ€** è¿›è¡Œè®¾è®¡æ—¶ï¼Œå¾ˆå¤šæ—¶å€™é€‰æ‹©çš„å•è¯æœ¬èº«å¹¶ä¸èƒ½ä½“ç°ç°åˆ†ç±»ã€ç±»å‹çš„å«ä¹‰ï¼Œæ¯”å¦‚ï¼š`Error`ã€`Message`ï¼Œé‚£è¿™æ—¶æˆ‘ä»¬å°±ä¼šåŠ ä¸Š `Type` åç¼€ï¼Œå¯¹åº”çš„å­—æ®µé€šçŸ¥å°±ä¼šä½¿ç”¨ `type` è¿›è¡Œå‘½åã€‚æ¯”å¦‚åœ¨å®šä¹‰æ¶ˆæ¯ä½“æ—¶ï¼š

```rust
pub struct MessagePayload {
  pub type: MessageType,
  pub content: String,
}
```

ä½†æ˜¯ï¼Œ`type` åœ¨ Rust ä¸­æ˜¯å…³é”®å­—ï¼Œè¿™é‡Œå°†å­—æ®µå‘½åä¸º `type` æ˜¯ä¸åˆæ³•çš„ï¼Œå¯ä»¥æ”¹ä¸º `msg_type`ã€‚é‚£æœ‰å…¶å®ƒå¯æ›¿ä»£ `type` çš„å•è¯å—ï¼ˆå‡å®šæˆ‘ä»¬åœ¨ç¼–ç¨‹ä¸­é€šå¸¸ä½¿ç”¨è‹±è¯­å•è¯è¿›è¡Œå‘½åï¼‰ï¼Œé‚£å°±æ˜¯ `kind`ã€‚åç»­æœ¬æ–‡å°†è¾ƒä¸ºè¯¦ç»†çš„è®¨è®ºåœ¨ç¼–ç¨‹è®¾è®¡ä¸­ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ `Type`ï¼Œè€Œåˆä»€ä¹ˆæ—¶å€™åˆé€‚ä½¿ç”¨ `Kind`ã€‚

## è‹±è¯­è¯­è¨€åˆ†æï¼škind vs type

### æ ¸å¿ƒè¯­ä¹‰å·®å¼‚

| ç»´åº¦       | kind                    | type                     |
| ---------- | ----------------------- | ------------------------ |
| **æœ¬è´¨**   | è‡ªç„¶å±æ€§/å†…åœ¨åˆ†ç±»       | æŠ€æœ¯è§„æ ¼/ç³»ç»Ÿåˆ†ç±»        |
| **æ¥æº**   | è‡ªç„¶å½¢æˆ/æœ¬è´¨ç‰¹å¾       | äººä¸ºå®šä¹‰/æŠ€æœ¯æ ‡å‡†        |
| **èŒƒå›´**   | å®½æ³›ç±»åˆ« (what sort of) | ç²¾ç¡®ç±»å‹ (what specific) |
| **ç¤ºä¾‹**   | "What kind of fruit?"   | "What type of file?"     |
| **é€‚ç”¨åŸŸ** | ç”Ÿç‰©/è¡Œä¸º/æŠ½è±¡æ¦‚å¿µ      | æŠ€æœ¯/ç³»ç»Ÿ/åè®®è§„èŒƒ       |

### ç¼–ç¨‹åœºæ™¯é€‚ç”¨åŸåˆ™

#### é€‚åˆç”¨ **`Kind`** çš„åœºæ™¯ï¼š

1. **è‡ªç„¶å±æ€§åˆ†ç±»**ï¼šé”™è¯¯ç±»å‹ã€ç”¨æˆ·çŠ¶æ€ã€ç”Ÿç‰©ç±»åˆ«
2. **è¡Œä¸ºç‰¹å¾**ï¼šæ“ä½œç±»å‹ã€äº‹ä»¶ç±»åˆ«
3. **æœ¬è´¨å·®å¼‚**ï¼šç¼–è¯‘å™¨æ ‡è®°ã€è¯­æ³•å…ƒç´ 
4. **å®½æ³›åˆ†ç±»**ï¼šéœ€è¦åç»­ç»†åˆ†çš„é¡¶å±‚ç±»åˆ«

#### é€‚åˆç”¨ **`Type`** çš„åœºæ™¯ï¼š

1. **æŠ€æœ¯è§„èŒƒ**ï¼šåè®®æ ¼å¼ã€ç¡¬ä»¶ç±»å‹
2. **ç³»ç»Ÿæ ‡å‡†**ï¼šæ–‡ä»¶æ ¼å¼ã€æ•°æ®ç±»å‹
3. **ç²¾ç¡®è§„æ ¼**ï¼šæ¶ˆæ¯åè®®ã€API ç‰ˆæœ¬
4. **äººä¸ºå®šä¹‰**ï¼šä¸šåŠ¡é€»è¾‘ä¸­çš„åˆ†ç±»æ ‡å‡†

> ğŸ“Œ æ ¸å¿ƒç»éªŒæ³•åˆ™ï¼š
> å½“åˆ†ç±»åæ˜  **å†…åœ¨æœ¬è´¨** æ—¶ç”¨ `Kind`ï¼Œåæ˜  **æŠ€æœ¯è§„èŒƒ** æ—¶ç”¨ `Type`

---

## ç¼–ç¨‹è¯­è¨€å®ç°æ–¹æ¡ˆ

### Rust æœ€ä½³å®è·µ

```rust
// ä¸åŠ åœºæ™¯ï¼ˆ`Status` çŠ¶æ€å·²éšå«åˆ†ç±»çš„å«ä¹‰ï¼‰
#[derive(Debug)]
enum UserStatus {
    Active,     // ç”¨æˆ·è‡ªç„¶çŠ¶æ€
    Suspended,  // ç³»ç»Ÿå¹²é¢„çŠ¶æ€
    Deleted,    // ç”¨æˆ·æœ¬è´¨çŠ¶æ€
}

// é€‚åˆç”¨ Kind çš„åœºæ™¯ (è‡ªç„¶å±æ€§)
#[derive(Debug)]
enum ErrorKind {
    NotFound,       // é”™è¯¯æœ¬è´¨
    Unauthorized,   // æƒé™æœ¬è´¨
    Timeout,        // ç½‘ç»œæœ¬è´¨
}

// é€‚åˆç”¨ Type çš„åœºæ™¯ (æŠ€æœ¯è§„èŒƒ)
#[derive(Debug)]
enum DeviceType {
    SSD,         // ç¡¬ä»¶æŠ€æœ¯ç±»å‹
    HDD,         // å­˜å‚¨æŠ€æœ¯è§„æ ¼
    NVMe,        // æ¥å£æŠ€æœ¯æ ‡å‡†
}

// é€‚åˆç”¨ Type çš„åœºæ™¯ (æŠ€æœ¯è§„èŒƒï¼Œåè®®)
#[derive(Debug)]
enum MsgType {
    Text,        // åè®®æ¶ˆæ¯ç±»å‹
    Binary,      // æ•°æ®ä¼ è¾“æ ¼å¼
    Control,     // ç³»ç»Ÿæ§åˆ¶ä¿¡å·
}

// ç»“æ„ä½“å­—æ®µå¤„ç†æ–¹æ¡ˆ
struct NetworkPacket {
    packet_kind: PacketKind,  // åŒ…çš„æœ¬è´¨ç±»åˆ«
    packet_type: PacketType,  // åŒ…çš„æŠ€æœ¯æ ¼å¼
    size: usize,
}

// å…³é”®å­—è§„é¿æŠ€å·§
struct DatabaseRecord {
    record_type: RecordType,   // ä½¿ç”¨å®Œæ•´è¯é¿å…å…³é”®å­—
    content: Vec<u8>,
}
```

### TypeScript æœ€ä½³å®è·µ

```typescript
// ä¸åŠ åœºæ™¯ï¼ˆ`Status` çŠ¶æ€å·²éšå«åˆ†ç±»çš„å«ä¹‰ï¼‰
enum UserStatus {
  Active = "active", // ç”¨æˆ·è‡ªç„¶çŠ¶æ€
  Suspended = "suspended", // è´¦æˆ·æœ¬è´¨çŠ¶æ€
  Deleted = "deleted", // æ°¸ä¹…çŠ¶æ€
}

// é€‚åˆç”¨ Kind çš„åœºæ™¯ (è‡ªç„¶å±æ€§)
enum ErrorKind {
  Network = "network", // é”™è¯¯æ ¹æºç±»åˆ«
  Validation = "validation", // æ•°æ®æœ¬è´¨é—®é¢˜
  Auth = "authentication", // æƒé™æœ¬è´¨é—®é¢˜
}

// é€‚åˆç”¨ Type çš„åœºæ™¯
enum MessageType {
  Text = "text", // åè®®æ¶ˆæ¯ç±»å‹
  Image = "image", // åª’ä½“æŠ€æœ¯æ ¼å¼
  Video = "video", // ä¼ è¾“æ•°æ®ç±»å‹
}

enum FileType {
  PDF = "application/pdf", // MIMEæŠ€æœ¯ç±»å‹
  JSON = "application/json",
  CSV = "text/csv",
}

// æ¥å£å­—æ®µå¤„ç†æ–¹æ¡ˆ
interface APIResponse {
  statusKind: ResponseStatusKind; // å“åº”æœ¬è´¨çŠ¶æ€
  contentType: ContentType; // æŠ€æœ¯æ ¼å¼ç±»å‹
  data: unknown;
}

// å…³é”®å­—è§„é¿æŠ€å·§
class NetworkMessage {
  msgType: MessageType; // ä½¿ç”¨ç¼©å†™msgTypeæ›¿ä»£type

  constructor(
    public readonly kind: MessageKind, // ä½¿ç”¨kind
    public readonly type: MessageType // TSå…è®¸ä½†éœ€è°¨æ…
  ) {}
}
```

### ä½¿ç”¨ `serde` è‡ªå®šä¹‰åºåˆ—åŒ–æ—¶çš„åç§°

åœ¨ Rust ä¸­å¯ä»¥ä½¿ç”¨ [serde](https://serde.rs/field-attrs.html#rename) å’Œ [serde_json](https://docs.rs/serde_json/latest/serde_json/) å°† `ty` å­—æ®µåºåˆ—åŒ–ä¸º `type` å­—æ®µã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```rust
use serde::{Serialize, Deserialize};
use serde_json;

// é€‚åˆç”¨ "type" çš„åœºæ™¯ï¼ˆæŠ€æœ¯è§„æ ¼ï¼‰
#[derive(Debug, Serialize, Deserialize)]
enum MessageType {
    Text,
    Image,
    Video,
}

// ä½¿ç”¨ serde çš„ rename å±æ€§è§£å†³å…³é”®å­—é—®é¢˜
#[derive(Debug, Serialize, Deserialize)]
struct NetworkMessage {
    id: u32,
    content: String,

    #[serde(rename = "type")] // å…³é”®æ³¨è§£ï¼šåºåˆ—åŒ–ä¸º "type"
    ty: MessageType,          // å†…éƒ¨ä½¿ç”¨éå…³é”®å­—å­—æ®µå
}

// é€‚åˆç”¨ "kind" çš„åœºæ™¯ï¼ˆæœ¬è´¨å±æ€§ï¼‰
#[derive(Debug, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
enum ErrorKind {
    Timeout,
    InvalidInput,
    NotFound,
}

fn main() {
    // åºåˆ—åŒ–ç¤ºä¾‹ (ty â†’ type)
    let msg = NetworkMessage {
        id: 42,
        content: "Hello world".into(),
        ty: MessageType::Image,
    };

    let json = serde_json::to_string_pretty(&msg).unwrap();
    println!("Serialized:\n{}\n", json);
    /* è¾“å‡ºï¼š
    {
      "id": 42,
      "content": "Hello world",
      "type": "Image"   // æ³¨æ„è¿™é‡Œæ˜¯ type è€Œä¸æ˜¯ ty
    }
    */

    // ååºåˆ—åŒ–ç¤ºä¾‹ (type â†’ ty)
    let json_data = r#"
        {
            "id": 99,
            "content": "Goodbye",
            "type": "Text"
        }
    "#;

    let decoded: NetworkMessage = serde_json::from_str(json_data).unwrap();
    println!("Deserialized: {:?}", decoded);
    // è¾“å‡º: NetworkMessage { id: 99, content: "Goodbye", ty: Text }
}
```

#### å…³é”®è§£å†³æ–¹æ¡ˆè¯´æ˜

1. `#[serde(rename = "type")]` å±æ€§
   - å°†ç»“æ„ä½“å­—æ®µ ty åºåˆ—åŒ–ä¸º JSON çš„ type å­—æ®µ
   - ååºåˆ—åŒ–æ—¶è‡ªåŠ¨å°† JSON çš„ type æ˜ å°„å› ty å­—æ®µ
2. å­—æ®µå‘½åç­–ç•¥

   ```rust
   // æ¨èæ–¹æ¡ˆï¼š
   struct NetworkMessage {
       #[serde(rename = "type")]
       ty: MessageType,  // æ¸…æ™°ä¸”é¿å…å…³é”®å­—
   }

   // æ›¿ä»£æ–¹æ¡ˆï¼ˆä¸æ¨èï¼‰ï¼š
   struct NetworkMessage {
       #[serde(rename = "type")]
       r#type: MessageType,  // ä½¿ç”¨åŸå§‹æ ‡è¯†ç¬¦è¯­æ³•ï¼Œå¯è¯»æ€§å·®
   }
   ```

3. æšä¸¾åºåˆ—åŒ–ä¼˜åŒ–

   ```rust
   // é»˜è®¤ä½¿ç”¨å˜ä½“åï¼ˆå¦‚ "Text"ï¼‰
   #[derive(Serialize, Deserialize)]
   enum MessageType { Text, Image }

   // å¯é€‰ï¼šåºåˆ—åŒ–ä¸ºå°å†™è›‡å½¢å‘½å
   #[derive(Serialize, Deserialize)]
   #[serde(rename_all = "snake_case")]
   enum MessageType { Text, Image } // å˜ä¸º "text", "image"
   ```

#### Typescript å¯¹æ¯”

åœ¨ **typescript** ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `type` ä½œä¸ºç±»å‹çš„å­—æ®µå‘½åã€‚

```typescript
// ç±»å‹å®šä¹‰
enum MessageType {
  Text = "text",
  Image = "image",
  Video = "video",
}

interface NetworkMessage {
  id: number;
  content: string;
  type: MessageType; // TS ä¸­å¯ç›´æ¥ç”¨ type
}

// åºåˆ—åŒ–
const msg: NetworkMessage = {
  id: 42,
  content: "Hello TS",
  type: MessageType.Image,
};

console.log(JSON.stringify(msg));
// è¾“å‡º: {"id":42,"content":"Hello TS","type":"image"}

// ååºåˆ—åŒ–
const jsonStr = '{"id":99,"content":"Goodbye","type":"text"}';
const decoded: NetworkMessage = JSON.parse(jsonStr);
```

#### ä½¿ç”¨åœºæ™¯å°ç»“

| åœºæ™¯         | Rust æ–¹æ¡ˆ                         | TypeScript æ–¹æ¡ˆ            |
| ------------ | --------------------------------- | -------------------------- |
| æŠ€æœ¯è§„æ ¼åˆ†ç±» | `#[serde(rename = "type")] ty: T` | ç›´æ¥ä½¿ç”¨ `type: T`         |
| æœ¬è´¨å±æ€§åˆ†ç±» | ç›´æ¥ä½¿ç”¨ `kind: ErrorKind`        | ç›´æ¥ä½¿ç”¨ `kind: ErrorKind` |
| è§„é¿å…³é”®å­—   | `ty` + rename å±æ€§                | æ— éœ€ç‰¹æ®Šå¤„ç†               |
| æšä¸¾åºåˆ—åŒ–   | `#[serde(rename_all = "...")]`    | åŸç”Ÿæ”¯æŒå­—ç¬¦ä¸²æšä¸¾         |

> æœ€ä½³å®è·µå»ºè®®ï¼š
>
> 1. å¯¹æŠ€æœ¯è§„æ ¼ç±»å­—æ®µä½¿ç”¨ ty + #[serde(rename = "type")]
> 2. å¯¹æœ¬è´¨å±æ€§ç±»å­—æ®µç›´æ¥ä½¿ç”¨ kind
> 3. å§‹ç»ˆåœ¨ JSON å±‚ä¿æŒè¯­ä¹‰æ­£ç¡®çš„å­—æ®µåï¼ˆå¦‚ typeï¼‰
> 4. åœ¨ä»£ç å±‚ä½¿ç”¨éå…³é”®å­—å­—æ®µåï¼ˆå¦‚ tyï¼‰ç¡®ä¿ç¼–è¯‘é€šè¿‡

---

## æ€»ç»“ï¼š è·¨è¯­è¨€é€šç”¨å‡†åˆ™

### ä¼˜å…ˆä½¿ç”¨ `Kind` çš„æƒ…å†µ

1. **çŠ¶æ€/é”™è¯¯åˆ†ç±»**ï¼š`UserStatusKind`, `ErrorKind`
2. **è‡ªç„¶å±æ€§**ï¼š`AnimalKind`, `MaterialKind`
3. **è¡Œä¸ºæ¨¡å¼**ï¼š`InteractionKind`, `EventKind`
4. **ç¼–è¯‘å™¨å†…éƒ¨**ï¼š`TokenKind`, `NodeKind`

### ä¼˜å…ˆä½¿ç”¨ `Type` çš„æƒ…å†µ

1. **åè®®/æ ¼å¼**ï¼š`MsgType`, `FileType`
2. **ç¡¬ä»¶è§„èŒƒ**ï¼š`DeviceType`, `CpuType`
3. **æ•°æ®ä¼ è¾“**ï¼š`PayloadType`, `EncodingType`
4. **ä¸šåŠ¡æ ‡å‡†**ï¼š`InvoiceType`, `PaymentType`

### å…³é”®å­—å¤„ç†ç­–ç•¥

| è¯­è¨€           | æ¨èæ–¹æ¡ˆ                 | å¤‡é€‰æ–¹æ¡ˆ         |
| -------------- | ------------------------ | ---------------- |
| **Rust**       | `msg_type`/`record_type` | `ty`/`kind`      |
| **TypeScript** | `msgType`/`contentType`  | `kind`/`variant` |
| **Go**         | `msgType`/`contentType`  | `kind`/`cat`     |

> ğŸ’¡ **é»„é‡‘æ³•åˆ™**ï¼š
> å½“ä¸ç¡®å®šæ—¶ï¼Œé€‰æ‹© `Kind` æ›´å®‰å…¨ï¼ˆ80%åœºæ™¯é€‚ç”¨ï¼‰ï¼Œ
> ä»…åœ¨æ˜ç¡®æŠ€æœ¯è§„èŒƒæ—¶ä½¿ç”¨ `Type`ï¼ˆéœ€å¤„ç†å…³é”®å­—é—®é¢˜ï¼‰
